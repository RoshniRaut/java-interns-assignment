version: "3.7"
services:
    angular-service:
        image: frontend
        build: ./Frontend
        ports:
           - "4200:80"

    rest-api:
        image: rest-api
        build: ./Backend/SB_Security_JWT_v2.7
        ports:
            - "8081:8080"
        links:
            - angular-service
        depends_on:
            - db
    
    # mysqldbContainer:
    #     image: mysqldb
    #     build: ./MySQL
    #     ports: 
    #         - "3306:3306"
    #     environment:
    #         - MYSQL_ROOT_PASSWORD=root
    #         - MYSQL_DATABASE=root
    
    db: 
        image: mysql
        command: --default-authentication-plugin=mysql_native_password
        restart: always
        environment: 
          - MYSQL_ROOT_PASSWORD=Ness@123
          - MYSQL_ROOT_USERNAME=root
        ports:
          - "3307:3306" #internal and external port mapping
        expose:
          - "3307"  #exposed port 
        volumes: 
          - my-db= '/var/lib/mysql' #internal volumne

    adminer:
      image: adminer
      restart: always
      ports:
        - 9000:8080

volumes:
  my-db: